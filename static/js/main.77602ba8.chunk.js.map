{"version":3,"sources":["components/NoWalletDetected.js","components/HelperNFT.js","components/Login.js","helper.js","components/Villain.js","components/Recruitment.js","components/Events.js","components/BondingCurve.js","components/MainMenu.js","components/AttributePage.js","components/WalletStatus.js","components/Villains.js","components/Dapp.js","fonts/DotBoundary/dotboundary-fixed.otf","fonts/PressStart2P.ttf","index.js"],"names":["NoWalletDetected","className","href","target","rel","HelperNFT","awardItem","address","data","style","textAlign","width","padding","background","borderColor","value","type","onClick","event","classes","keyField","rows","columns","tableLayout","color","rowStyle","row","rowIndex","fontWeight","Login","loginFunc","useState","password","setPassword","margin","onSubmit","name","required","onChange","minMaxRGB","val","Math","min","max","get_rgb","rgb","adj","r","g","b","ret","draw_villain","ctx","villain","pixelData","factor","j","length","attr","numBlessed","numPunished","pixels","z","useMap","y","parseInt","x","fillStyle","fillRect","short_addr","addr","num","slice","update_cache","attrName","prevState","statusData","localStorage","setItem","ATTR_TABLE_COLUMNS","Villain","villainData","userAddress","tribulate","valhalla","pricing","categories","vId","useParams","canvasRendered","setCanvasRendered","canvasRef","useRef","useEffect","canvas","current","getContext","drawCanvas","mainStyle","i","cat","charAt","toUpperCase","s","split","push","height","ref","Recruitment","recruitMember","isApproved","getApproval","defaultValue","approved","setApproved","sAddr","sId","state","setState","inputChanged","checkApproval","ethers","utils","isAddress","then","result","constants","AddressZero","recruitText","approvalText","to","disabled","OverlayTrigger","placement","overlay","Tooltip","opacity","whiteSpace","Events","radioValue","setRadioValue","showData","overflowY","ButtonGroup","toggle","map","radio","idx","ToggleButton","variant","checked","e","currentTarget","BondingCurve","curves","labels","recruit","numBVAlive","datasets","rp","label","fill","vp","options","animation","duration","tooltips","enabled","hover","mode","plugins","title","display","text","scales","MainMenu","pathname","useLocation","activeStyle","normalStyle","alignItems","justifyContent","Image","src","marginRight","link","ATTRIBUTE_CATEGORIES","Object","keys","contractAddresses","AttributePage","props","initialState","attrFilter","init","key","this","React","createRef","xFactor","yFactor","invert","includes","draw","els","category","remaining","initial","minWidth","maxWidth","marginBottom","attrData","Card","Body","Title","fontSize","replace","Text","CardDeck","flexWrap","borderRadius","onChangeFilter","bind","concat","categoriesToAttributes","renderAttributeGrid","Component","WalletStatus","blockNumber","currentBlock","cachedBlock","overflow","blockDiff","float","RADIOS","HELPER_TEXTS","Villains","showFilter","onValueChange","console","log","force","villains","v","isPlunder","sacrificeAddr","id","sacrificeId","vCat","titleDiv","owner","helperText","isUserVillains","renderVillainGrid","PASSWORD","CHAIN_ID_MAP","1","3","DYNAMIC_CACHE_VARIABLES","linkFormatter","cell","VALHALLA_COLUMNS","RECRUITS_COLUMNS","TRIBULATIONS_COLUMNS","HELPERMINTS_COLUMNS","attributesToCategories","Dapp","getItem","clear","undefined","cachedPixelData","JSON","parse","isAuthenticated","storedPwd","bcrypt","compareSync","tokenData","selectedAddress","balance","txBeingSent","transactionError","networkError","existingVillains","userVillains","events","valhallas","recruits","tribulations","helperMints","authenticated","varName","cachedVal","document","body","window","ethereum","on","networkId","_connectWallet","pwd","basename","hashType","fontFamily","path","_awardItem","_recruitMember","nftContractAddr","_isApproved","_getApproval","exact","children","memberId","_tribulate","minAmt","_valhalla","position","_authenticate","_stopPollingData","contractArtifact","Contract","abi","_provider","getSigner","a","request","method","_checkNetwork","providers","Web3Provider","_helperContracts","_getHelperContracts","_setupContractData","_bvContract","makeContract","BitVillainsArtifact","_initialize","tx","_getPixelData","from","tokenId","pricePaid","nextRecruitmentPrice","nextValhallaPrice","membersAlive","reserve","eventKey","toShort","getAddress","formatEther","toString","_memberToRecruitedMap","txHash","transactionHash","priceReceived","nextRecruitPrice","ownerShort","who","isPunishment","whoShort","stringify","_updateDynamicData","_updateDynamicDataInterval","setInterval","MILLISECONDS_IN_SECOND","newAddress","_resetState","_intializeEthers","_token","tokenContractAddress","Token","TokenArtifact","queryFilter","filters","Transfer","eventResults","args","MemberRecruited","MemberToValhalla","Tribulation","_pollDataInterval","_updateBalance","clearInterval","symbol","balanceOf","helperContracts","BVTest721Artifact","BVTest1155Artifact","attrContracts","contract","AttributeArtifact","_attrContracts","attrManContracts","AttributeManagerArtifact","_attrManContracts","getPixels","getPixelMap","attrs","m_attrs","m_sizes","size","m_sizes_original","oSize","numVillains","getMemberAttributes","k","error","m_attrMap","attrMap","m_sacrificeMap","getValhallaPrice","getPunishedBlessedPrice","tp","getBlockNumber","l","nftContract","ERC721Artifact","getApproved","_dismissTransactionError","_sendTx","approve","recruitMemberWith721","parseEther","gasLimit","func","hash","toast","success","wait","receipt","status","Error","code","message","networkVersion","_dismissNetworkError","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.77602ba8.chunk.js","sourcesContent":["import React from \"react\";\n\nexport function NoWalletDetected() {\n  return (\n    <div className=\"container\">\n      <div className=\"row justify-content-md-center\">\n        <div className=\"col-6 p-4 text-center\">\n          <p>\n            No Ethereum wallet was detected. <br />\n            Please install{\" \"}\n            <a\n              href=\"http://metamask.io\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              MetaMask\n            </a>\n            .\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nexport function HelperNFT({ awardItem, address, data}) {\n  const rowStyle = (row, rowIndex) => {\n      let style = {fontWeight:'normal'};\n      if (row[\"to\"] === address){\n          style['fontWeight'] = 'bold';\n      }\n      return style;\n  };\n  return (\n    <div style={{textAlign:'left', width:'50%', padding:\"1%\"}} className='MainBodyElement'>\n      <h4>Generate a Sample Sacrificial NFT</h4>\n      <form\n      >\n        <div className=\"form-group\">\n          <input style={{background:'#008080', borderColor:'black'}} className=\"btn btn-primary\"\n            value=\"Mint NFT\" \n            type=\"button\"\n            onClick={(event) => {\n              if (address) {\n                awardItem(address);\n              }\n            }}\n          />\n        </div>\n      </form>\n      <br />\n      <h4>Sacrificial NFT Mints</h4>\n        <BootstrapTable classes=\"EventsTable\" keyField='tokenId' data={ data.rows } columns={ data.columns } style={{tableLayout:'auto', color:'blue'}} rowStyle={rowStyle}/>\n    </div>\n  );\n}\n","import React, {useState} from \"react\";\n\nexport function Login({ loginFunc }) {\n  const [password, setPassword] = useState('')\n  return (\n    <div style={{width:'10%', margin: '0 auto'}}>\n      <h4>Login BitVillains Beta</h4>\n      <form\n        onSubmit={(event) => {\n          loginFunc(password);\n        }}\n      >\n        <div className=\"form-group\">\n          <input className=\"form-control\" type=\"text\" name=\"password\" required\n          onChange={(event)=>{setPassword(event.target.value)}}\n          />\n          <br />\n          <input style={{background:'#008080', borderColor:'black'}} className=\"btn btn-primary\"\n            value=\"Login\" \n            type=\"button\"\n            onClick={(event) => {\n              loginFunc(password);\n            }}\n          />\n        </div>\n      </form>\n    </div>\n  );\n}\n","function minMaxRGB(val){\n    return Math.min(Math.max(0, val), 255);\n}\n\nexport function get_rgb(rgb, adj=0){\n    const r = (rgb>>16)&0x0ff;\n    const g = (rgb>>8)&0x0ff;\n    const b = (rgb)&0x0ff;\n    const ret = [minMaxRGB(r+adj), minMaxRGB(g+adj), minMaxRGB(b+adj)]\n    return ret;\n}\n\nexport function draw_villain(ctx, villain, pixelData, factor=5){\n    for (let j = 0;j< villain['attrs'].length; j++){\n        const attr = villain['attrs'][j];\n        const numBlessed = villain['numBlessed'];\n        const numPunished = villain['numPunished'];\n        const adj = numBlessed - numPunished -1;\n        let pixels = pixelData[attr.name].pixels;\n        for (var z = 0;z < pixels.length; z++)\n        {\n            if(!pixelData[attr.name].useMap[z])\n                continue;\n            var y = parseInt(z/16) * factor;\n            var x = z % 16 * factor;\n            let rgb = get_rgb(pixels[z], adj);\n            ctx.fillStyle = `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n            ctx.fillRect(x,y, factor, factor);\n        }\n    }\n\n\n}\n\nexport function short_addr(addr, num=6){\n    return addr.slice(0, num) + \"...\" + addr.slice(-4);\n}\n\nexport function update_cache(attrName, val, prevState){\n    const statusData = {...prevState.statusData};\n    statusData[attrName] = val;\n    localStorage.setItem(attrName, val);\n    return {statusData};\n}\n","import React, {useState, useRef, useEffect} from \"react\";\nimport {useParams} from \"react-router-dom\";\nimport {draw_villain, short_addr} from \"../helper.js\";\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport './Dapp.css';\n\nconst IMG_SIZE = 384;\nconst ATTR_TABLE_COLUMNS = [\n    {'dataField': 'cat', 'text': 'Category'},\n    {'dataField': 's', 'text': 'Attribute'}\n];\nexport function Villain({villainData, pixelData, userAddress, tribulate, valhalla, pricing, categories}) {\n  let {vId} = useParams();\n  const [canvasRendered, setCanvasRendered] = useState(false);\n  const canvasRef = useRef();\n  const villain = villainData[vId];\n\n  function drawCanvas(){\n    const canvas = canvasRef.current;\n    if(canvas && !canvasRendered){\n        draw_villain(canvas.getContext('2d'), villain, pixelData, canvas.getContext(\"2d\").canvas.width/16);\n        setCanvasRendered(true);\n    }\n  }\n\n  useEffect(() =>{\n    drawCanvas();\n  });\n  const mainStyle ={width:IMG_SIZE*1.15, textAlign:'center'};\n  if(!villain){\n    return(<div style={mainStyle} className=\"MainBodyElement\">\n      <h4>Villain {vId} not found!</h4>\n    </div>);\n  }\n  const data = [];\n  for (var i=0; i<villain['attrs'].length; i++){\n    const attr = villain['attrs'][i];\n    let cat = categories[i];\n    cat = cat.charAt(0).toUpperCase() + cat.slice(1);\n    let s = \"\";\n    for (const w of attr['name'].split(/(?=[A-Z])/))\n        s+=w+\" \";\n    data.push({cat, s});\n  }\n  return (\n    <div style={mainStyle} className=\"MainBodyElement\">\n      <h4>Villain {vId}</h4>\n      <div><canvas height={IMG_SIZE} width={IMG_SIZE} ref={canvasRef} /></div>\n      <br />\n      <div>Owner: {short_addr(villain['owner'], 8)}</div>\n      <div>Sacrifice Contract Addr: {short_addr(villain['sacrificeAddr'])}</div>\n      <div>Sacrifice Id: {villain['sacrificeId']}</div>\n      <BootstrapTable keyField='cat' classes=\"VillainDetailsTable\" data={data} columns={ATTR_TABLE_COLUMNS} style={{tableLayout:'auto', color:'blue'}}/>\n      <div>Times Blessed: {villain['numBlessed']}</div>\n      <div>Times Punished: {villain['numPunished']}</div>\n      <br />\n      {villain['owner'] === userAddress &&\n          <div>\n          <div>\n          <input className=\"btn btn-primary\" type=\"button\" value={\"Tribulate for \"+pricing.tribulate+\" ETH\"}\n             onClick={()=>tribulate(vId)}/>\n        </div>\n          <br />\n          <div>\n          <input className=\"btn btn-primary\" type=\"button\" value={\"Valhalla for \"+pricing.valhalla+\" ETH\"}\n             onClick={()=>valhalla(vId, 0)}/>\n        </div>\n        <br />\n        </div>\n      }\n    </div>\n  );\n}\n","import React, {useState} from \"react\";\nimport { ethers } from \"ethers\";\nimport {Link} from \"react-router-dom\";\nimport \"./Dapp.css\";\nimport {short_addr} from \"../helper.js\";\nimport {Tooltip, OverlayTrigger} from 'react-bootstrap';\n\nexport function Recruitment({ recruitMember, isApproved, getApproval, pricing, defaultValue}) {\n  const [approved, setApproved] = useState(false);\n  const [state, setState] = useState({\n      sAddr: defaultValue,\n      sId: \"0\"\n  });\n  \n  function inputChanged(event){\n      const val = event.target.value\n      setState({\n        ...state,\n        [event.target.name]: val\n      });\n      let sAddr = state.sAddr;\n      let sId = state.sId;\n      if(event.target.name === 'sAddr')\n          sAddr = val;\n      else if(event.target.name === 'sId')\n          sId = val;\n      checkApproval(sAddr, sId);\n  }\n\n  function checkApproval(sAddr, sId){\n      if(ethers.utils.isAddress(sAddr) && sId !== \"\"){\n          isApproved(sAddr, sId).then((result)=>{\n            setApproved(result !== ethers.constants.AddressZero);\n          });\n      }\n\n  }\n\n  function recruitMemberClicked(event){\n      if (state.sAddr && state.sId) {\n        recruitMember(state.sAddr, state.sId).then((result)=>{\n      });\n      }\n    }\n  function getApprovalClicked(event){\n      if (state.sAddr && state.sId) {\n        getApproval(state.sAddr, state.sId).then((result)=>{\n            checkApproval(state.sAddr, state.sId);\n        });\n      }\n    }\n\n  const recruitText = \"Recruit Member with sacrifice \" + (state.sId ? state.sId : '?') + \" from \"+short_addr(state.sAddr);\n  const approvalText = \"Get Approval for \" + (state.sId ? state.sId : '?') + \" from \"+short_addr(state.sAddr);\n  return (\n    <div style={{textAlign:'left', width:'50%', padding:\"1%\"}} className=\"MainBodyElement\">\n      <h4>Recruit a New BitVillain</h4>\n      <form\n      >\n        <p>\n        An NFT sacrifice is required to recruit a new BitVillain. Even if a BitVillain is sent to Valhalla, the sacrifice will remain locked up in perpetuity.\n        </p>\n        <p>\n         In the testnet environment, there is a <Link to=\"/helper\">sample NFT contract </Link>used to generate a new sacrificial NFT for recruitment. Once minted successfully, it appears in the \"Sacrificial NFT Mints\" table with the corresponding owner and generated sacrifice id.\n        <br />\n        <br />\n        The sample NFT contract (and like all ERC721 standard NFTs on ethereum) first requires an approval transaction to allow the BV contract to transfer the sacrifice id to itself. After the approval transaction is confirmed, the sacrifice can be used to recruit a new BitVillain.\n        </p>\n        <div className=\"form-group\">\n          <label>Sacrifice Contract address (pre-populated with sample NFT)</label>\n          <input className=\"form-control\" type=\"text\" name=\"sAddr\" required\n            value={state.sAddr}\n            onChange={inputChanged}\n            disabled={true}\n          />\n        </div>\n        <br />\n        <div className=\"form-group\">\n          <label>Sacrifice Id</label>\n          <input className=\"form-control\" type=\"number\" name=\"sId\" required onChange={inputChanged} value={state.sId}/>\n        </div>\n        <br />\n        <div>\n        {approved ?\n        <div className=\"form-group\">\n          <OverlayTrigger placement=\"top\" overlay={<Tooltip >Sacrifice has already been approved< /Tooltip>}><div style={{opacity:'50%', background:'#008080', borderColor:'black'}} className=\"btn btn-primary\">{approvalText}</div></OverlayTrigger>\n        </div>\n        :\n        <div className=\"form-group\">\n          <input style={{background:'#008080', borderColor:'black', whiteSpace:'normal'}} className=\"btn btn-primary\" type=\"button\" value={approvalText} disabled={approved}\n             onClick={getApprovalClicked}/>\n        </div>\n        }\n        <br />\n        {approved ?\n        <div className=\"form-group\">\n          <input style={{background:'#008080', borderColor:'black', whiteSpace:'normal'}} className=\"btn btn-primary\" type=\"button\" value={recruitText}\n             disabled={!approved}\n             onClick={recruitMemberClicked}/>\n        </div>\n        :\n        <div className=\"form-group\">\n          <OverlayTrigger placement=\"top\" overlay={<Tooltip>Sacrifice needs approval before recruitment can occur< /Tooltip>}><div style={{opacity:'50%', background:'#008080', borderColor:'black'}} className=\"btn btn-primary\">{recruitText}</div></OverlayTrigger>\n        </div>\n        }\n        </div>\n      </form>\n    </div>\n  );\n}\n","import React, {useState} from \"react\";\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport {ButtonGroup, ToggleButton} from 'react-bootstrap';\nimport './Events.css';\nimport './Dapp.css';\n\nexport function Events({data}) {\n    const [radioValue, setRadioValue] = useState('recruits');\n    const radios = [\n        { name: 'Recruits', value: 'recruits' },\n        { name: 'Tribulations', value: 'tribulations' },\n        { name: 'Valhalla', value: 'valhallas' }\n    ];\n    const showData = data[radioValue];\n    return (\n        <div className='MainBodyElement' style={{width:'80%', padding:'1%', overflowY:'scroll'}}>\n      <h4>Events</h4>\n        <ButtonGroup className='EventsControlButton' toggle style={{width:'50%', margin:'0 auto', padding:'0'}}>\n        {radios.map((radio, idx) => (\n          <ToggleButton\n            className=\"EventsChoiceToggle\"\n            key={idx}\n            type=\"radio\"\n            variant=\"secondary\"\n            name=\"radio\"\n            value={radio.value}\n            checked={radioValue === radio.value}\n            onChange={(e) => setRadioValue(e.currentTarget.value)}\n          >\n            {radio.name}\n          </ToggleButton>\n        ))}\n        </ButtonGroup>\n        <br />\n        <BootstrapTable classes=\"EventsTable\" keyField='eventKey' data={ showData.rows } columns={ showData.columns }/>\n        </div>\n    );\n}\n","import React from \"react\";\nimport { Line } from 'react-chartjs-2';\n\n\nexport function BondingCurve({ awardItem, address, curves}) {\n  return (\n    <div style={{textAlign:'left', width:'75%', padding:\"1%\"}} className='MainBodyElement'>\n      <h4>Bonding Curve</h4>\n      <Line\n            data={{\n                labels: curves.recruit.map(x => x.numBVAlive),\n                datasets: [\n                    {\n                        data: curves.recruit.map(x => x.rp),\n                        label: \"Recruitment Price (ETH)\",\n                        borderColor: \"#008080\",\n                        fill:false\n                    },\n                    {\n                        data: curves.valhalla.map(x => x.vp),\n                        label: \"Valhalla Price (ETH)\",\n                        borderColor: \"#002080\",\n                        fill:false\n                    }\n                ]\n            }}\n            options={\n                {animation:{duration:0}, \n                tooltips: {enabled: false}, \n                hover: {mode: null},\n                plugins: {\n                    title:{display:false, text:'hi'}\n                },\n                scales: {\n                    y: {\n                        title: {\n                            display: true,\n                            text: 'Price (ETH)'\n                        }\n                    },\n                    x: {\n                        title: {\n                            display: true,\n                            text: 'BitVillains At Large'\n                        }\n                    }\n                }\n            }}\n      />\n    </div>\n  );\n}\n","\nimport React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport {Image, Tooltip, OverlayTrigger} from 'react-bootstrap';\nimport {short_addr} from \"../helper.js\";\nexport function MainMenu({address}) {\n  const {pathname} = useLocation();\n  const activeStyle={background:'#008080'};\n  const normalStyle = {}\n  const mainMenuBarData = [\n        {text:'Home', link:'/index'},\n        {text:'Recruitment', link:'/recruitment'},\n        {text:'Helper NFT', link:'/helper'},\n        {text:\"Rogues' Gallery\", link:'/bitVillains'},\n        {text:'Plunder', link:'/plunder'}\n  ];\n  const intelMenuData = [\n        {text:'Attribute Pool', link:'/attributePool'},\n        {text:'Events', link:'/events'},\n        {text:'BondingCurve', link:'/bondingCurve'},\n        {text:'My BitVillains', link:'/userBitVillains'}\n  ];\n  let val = <div />;\n  if(address){\n    val = (<div>Connected Wallet: {short_addr(address)}</div>);\n  }\n  return (\n      <div style={{display:'flex', alignItems:'center', justifyContent:'start', background:'rgba(0, 0, 0, 0.85)', padding:'4px'}}>\n        <Image className=\"MainLogo\" src={\"/images/logo1.png\"} style={{marginRight:'5%'}}/>\n        <ul className=\"mainNavBar\">\n          {mainMenuBarData.map(function(x, i){\n              return <li className='navEl' key={i} style={pathname===x['link'] ? activeStyle : normalStyle}><Link className={'a'} to={x['link']}>{x['text']}</Link></li>;\n          })}\n          <li className=\"mainDropDown\">\n          <div className=\"dropbtn\">Intel</div>\n          <div className=\"mainDropDown-content\">\n          {intelMenuData.map(function(x, i){\n              return <Link className=\"dropDownItem\" key={i} to={x['link']} style={pathname===x['link'] ? activeStyle : normalStyle}>{x['text']}</Link>\n          })}\n          </div>\n          </li>\n          <li className='walletEl'>\n         <OverlayTrigger placement=\"bottom\" overlay={<Tooltip >{address}< /Tooltip>}>{val}</OverlayTrigger>\n          </li>\n        </ul>\n    </div>\n  );\n};\n","import React from \"react\";\nimport contractAddresses from \"../contracts/addresses.json\";\nimport categoriesToAttributes from \"../categories.json\"\n// We'll use ethers to interact with the Ethereum network and our contract\nimport {Card, CardDeck} from 'react-bootstrap';\nimport {get_rgb} from \"../helper.js\";\nimport './Dapp.css';\n\nconst ATTRIBUTE_CATEGORIES = Object.keys(contractAddresses['Attribute']);\nclass AttributePage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.initialState = {\n        canvasRendered : false,\n        attrFilter: 'all'\n    }\n\n    this.state = this.initialState;\n    this.init();\n  }\n\n  init(){\n    for (var key of Object.keys(contractAddresses['Attribute'])) {\n        this[`ref_${key}`] = React.createRef();\n    }\n\n  }\n\n  componentDidMount() {\n    this.drawCanvas();\n  }\n\n  componentDidUpdate() {\n    this.drawCanvas();\n  }\n\n  drawCanvas() {\n    if (!this.props.pixelData || this.state.canvasRendered)\n        return;\n    for (var key of ATTRIBUTE_CATEGORIES) {\n        const canvas = this[`ref_${key}`].current;\n        if (!!canvas)\n        {\n            const ctx = canvas.getContext(\"2d\");\n            let xFactor = ctx.canvas.width/16;\n            let yFactor = ctx.canvas.height/16;\n            let pixels = this.props.pixelData[key]['pixels'];\n            let invert = false;\n            if(key.includes('White'))\n                invert = true;\n            for (var i = 0;i < pixels.length; i++)\n            {\n                var y = parseInt(i/16) * yFactor;\n                var x = (i % 16) * xFactor;\n                let draw = false;\n                if(this.props.pixelData[key]['useMap'][i])\n                    draw = true;\n                if(draw){\n                    let rgb = get_rgb(pixels[i]);\n                    ctx.fillStyle = `rgb(${rgb[0]}, ${rgb[1]}, ${rgb[2]})`;\n                    ctx.fillRect(x,y, xFactor, yFactor);\n                }\n                else if(invert){\n                    ctx.fillStyle = `rgb(0, 0, 0)`;\n                    ctx.fillRect(x,y, xFactor, yFactor);\n                }\n            }\n            this.setState({canvasRendered:true});\n        }\n    }\n  }\n\n  renderAttributeGrid() {\n\n    const els = [];\n    for (var key of Object.keys(contractAddresses['Attribute'])) {\n        let remaining = 'loading';\n        let initial = 'loading';\n       var category;\n       const style ={textAlign:'center', minWidth: \"10rem\", maxWidth: \"10rem\", borderColor:'#008080', marginBottom: '1%', marginRight:'1%'};\n       if (this.props.attrData){\n            let attrData = this.props.attrData[key];\n            if (attrData){\n                remaining = attrData['remainingGenePool'];\n                initial = attrData['initialGenePool'];\n                category = attrData['category'];\n            }\n        }\n        if (this.state.attrFilter!=='all' && this.state.attrFilter!==category){\n            style['display'] = 'none';\n        }\n        els.push(<Card key={key} style={style}><Card.Body><Card.Title style={{fontSize:'.9em'}}>{key.replace(/([A-Z])/g, ' $1')}</Card.Title><canvas width='128px' height='128px' style={{margin:'0', padding:'0', width:'100%'}} ref={this[`ref_${key}`]}/><Card.Text>{remaining}/{initial}</Card.Text></Card.Body></Card>);\n    }\n        return (\n            <CardDeck style={{display:'flex', flexWrap:'wrap', width:'100%'}}>\n            {els}\n            </CardDeck>\n        );\n    }\n\n  onChangeFilter(e){\n    this.setState({attrFilter:e.target.value})\n    this.drawCanvas();\n  }\n\n\n  render() {\n    return (\n       <div style={{width:'75%', margin: 'auto', padding:'0.5%'}}>\n       <div>\n       <div style={{borderRadius:'5px', padding:'2px', background:'#D2D2D2', display:'inline-block'}}>\n       <h4>Attribute Pool</h4>\n        Attribute Filter: {\" \"}\n       <select onChange={this.onChangeFilter.bind(this)} style={{margin: '0 auto'}}>\n        {['all'].concat(Object.keys(categoriesToAttributes)).map(num => <option value={num} key={num}>{num}</option>)}\n        </select>\n        </div>\n        </div>\n        <br />\n        {this.renderAttributeGrid()}\n        </div>\n    );\n  }\n}\n\nexport default AttributePage;\n","import React from \"react\";\nimport './Dapp.css';\n\nexport function WalletStatus({statusData }) {\n  const blockNumber = statusData.currentBlock || 'loading';\n  const cachedBlock = statusData.cachedBlock || 'loading';\n  const mainStyle = {overflow:'hidden', padding:'5px', fontSize:'8px', background:'yellow', color:'black'};\n  if (statusData.currentBlock){\n      if(!statusData.cachedBlock)\n          mainStyle['background'] = 'red';\n      else{\n          const blockDiff = blockNumber - cachedBlock;\n          if (blockDiff > 20){\n              mainStyle['background'] = 'red';\n          }\n          else if (blockDiff > 10){\n              mainStyle['background'] = 'pink';\n          }\n          else if (blockDiff > 1){\n              mainStyle['background'] = 'yellow';\n          }\n          else{\n              mainStyle['background'] = '#008080';\n              mainStyle['color'] = 'white';\n          }\n      }\n  }\n  return (\n    <div style={mainStyle}>\n            <div style={{float:'left'}}>\n            Latest Block: {blockNumber}\n            </div>\n            <div style={{float:'right'}}>\n            Displayed Block: {cachedBlock}\n            </div>\n    </div>\n  );\n}\n","import React from \"react\";\n\nimport {Card, CardDeck, Tooltip, OverlayTrigger} from 'react-bootstrap';\nimport {draw_villain} from \"../helper.js\";\nimport { Link } from \"react-router-dom\";\nimport { ethers } from \"ethers\";\n\nconst MAX_VILLAINS = 100;\nconst RADIOS = [\n    { name: 'All', value: 'all' },\n    { name: 'Genesis', value: 'genesis' },\n    { name: 'At Large', value: 'atlarge' },\n    { name: 'Valhalla', value: 'valhalla' }\n];\nconst HELPER_TEXTS = {\n    'genesis': \"Genesis BV's were created at contract initiation and are not eligble for Valhalla rewards\",\n    'atlarge': \"At Large BV's are created but not currently in Valhalla\",\n    'valhalla':\"Valhalla BV's have been sent permanently to Valhalla\",\n    'all': \"\"\n}\nexport class Villains extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.initialState = {\n        canvasRendered : false,\n        showFilter:'all'\n    }\n\n    this.state = this.initialState;\n    for (var i = 0;i < MAX_VILLAINS; i++) {\n        this[`ref_${i}`] = React.createRef();\n    }\n    this.onValueChange=this.onValueChange.bind(this);\n  }\n\n  componentDidUpdate() {\n    this.drawCanvas(true);\n  }\n\n  componentDidMount() {\n    this.drawCanvas();\n  }\n  onValueChange(event) {\n    console.log(event.target.value);\n    this.setState({\n      showFilter: event.target.value\n    });\n  }\n\n  drawCanvas(force=false){\n    if (!this.props.pixelData || (!force && this.state.canvasRendered))\n        return;\n    for (let i = 0;i < this.props.villains.length; i++) {\n        const canvas = this[`ref_${i}`].current;\n        if (!!canvas && this.props.pixelData)\n        {\n            const ctx = canvas.getContext(\"2d\");\n            const villain = this.props.villains[i];\n            // assume square canvas!\n            draw_villain(ctx, villain, this.props.pixelData, ctx.canvas.width/16);\n            if(!this.state.canvasRendered)\n                this.setState({canvasRendered:true});\n        }\n    }\n  }\n\n  renderVillainGrid() {\n    /*const renderTooltip = props => (\n        <Tooltip {...props}>Genesis BV</Tooltip>\n    );*/\n    const els = [];\n    for (let i = 0 ;i < this.props.villains.length; i++) {\n        let style = {minWidth: \"10rem\", maxWidth: \"10rem\"}\n        style['backgroundColor'] = 'white';\n        style['borderColor'] = '#008080';\n        style['borderWidth'] = '2px';\n        style['marginBottom'] = '1%';\n        style['marginRight'] = '1%';\n        const v = this.props.villains[i];\n        if(!this.props.isPlunder){\n            let vCat = 'atlarge';\n            let titleDiv = <div> BV {v.id} </div>;\n            if (v.owner === 'valhalla'){\n                vCat = 'valhalla';\n                style['backgroundColor'] = 'grey';\n                // only show tooltip if filtering display\n                if (this.state.showFilter=== 'all')\n                    titleDiv = <OverlayTrigger placement=\"top\" overlay={<Tooltip>In Valhalla< /Tooltip>}>{titleDiv}</OverlayTrigger>;\n            }\n            else if (v.sacrificeAddr === ethers.constants.AddressZero){\n                vCat = 'genesis';\n                style['backgroundColor'] = 'yellow';\n                // only show tooltip if filtering display\n                if (this.state.showFilter=== 'all')\n                    titleDiv = <OverlayTrigger placement=\"top\" overlay={<Tooltip>Genesis BV< /Tooltip>}>{titleDiv}</OverlayTrigger>;\n            }\n            if (this.state.showFilter!=='all' && this.state.showFilter!==vCat){\n                style['display'] = 'none';\n            }\n            els.push(\n                    <Card key={i} style={style}>\n                    <Card.Body>\n                    <Card.Title>\n                    {titleDiv}\n                    </Card.Title>\n                    <canvas width='128px' height='128px' style={{width:'100%'}} ref={this[`ref_${i}`]}/>\n                    <Card.Text>\n                    </Card.Text>\n                    <Link to={'/villain/' + v.id}>Details</Link>\n                    </Card.Body>\n                    </Card>);\n        }\n        else{\n            if (ethers.constants.AddressZero === v.sacrificeAddr)\n                continue;\n            style['minWidth'] = '16rem';\n            style['maxWidth'] = '16rem';\n            els.push(\n                    <Card key={i} style={style}>\n                    <Card.Body>\n                    <Card.Title>\n                        Sacrifice {v.id}\n                    </Card.Title>\n                    <Card.Text>\n                    Sacrifice Address: {v.sacrificeAddr}<br /><br />\n                    Sacrifice Id: {v.sacrificeId}<br />\n                    </Card.Text>\n                    </Card.Body>\n                    </Card>);\n        }\n    }\n        return (\n            <div>\n            <br />\n            <CardDeck style={{display:'flex', flexWrap:'wrap'}}>\n            {els}\n            </CardDeck>\n            </div>\n        );\n    }\n\n  render() {\n    const onValueChange = this.onValueChange;\n    const showFilter = this.state.showFilter;\n    const helperText = HELPER_TEXTS[showFilter];\n    return (\n       <div style={{width:'80%', margin: '0 auto'}}>\n       {(!this.props.isPlunder && !this.props.isUserVillains) &&\n       <div style={{borderRadius:'5px', padding:'2px', background:'#D2D2D2', display:'inline-block'}}>\n       <h4>Explore BitVillains</h4>\n        <form>\n        {RADIOS.map(function(x, i){\n            return (<div key={i}><label><input checked={showFilter === x['value']} type='radio' value={x['value']} name='showFilter' onChange={onValueChange}></input> {x['name']}</label></div>);\n        })}\n        </form>\n        <div style={{fontSize:'9px', float:'right'}}>{helperText}</div>\n        </div>\n        }\n        {this.renderVillainGrid()}\n        </div>\n    );\n  }\n\n}\n","import React from \"react\";\n\n// We'll use ethers to interact with the Ethereum network and our contract\nimport { ethers } from \"ethers\";\nimport bcrypt from 'bcryptjs';\n\n// We import the contract's artifacts and address here, as we are going to be\n// using them with ethers\nimport TokenArtifact from \"../contracts/Token.json\";\nimport AttributeArtifact from \"../contracts/Attribute.json\";\nimport AttributeManagerArtifact from \"../contracts/AttributeManager.json\";\nimport BVTest721Artifact from \"../contracts/BVTest721.json\";\nimport BVTest1155Artifact from \"../contracts/BVTest1155.json\";\nimport ERC721Artifact from \"../contracts/ERC721.json\";\nimport BitVillainsArtifact from \"../contracts/BitVillains.json\";\nimport tokenContractAddress from \"../contracts/contract-address.json\";\nimport contractAddresses from \"../contracts/addresses.json\";\nimport categoriesToAttributes from \"../categories.json\"\n\n// All the logic of this dapp is contained in the Dapp component.\n// These other components are just presentational ones: they don't have any\n// logic. They just render HTML.\nimport { NoWalletDetected } from \"./NoWalletDetected\";\nimport { HelperNFT } from \"./HelperNFT\";\nimport { Login } from \"./Login\";\nimport { Villain } from \"./Villain\";\nimport { Recruitment } from \"./Recruitment.js\";\nimport { Events } from \"./Events.js\";\nimport { BondingCurve } from \"./BondingCurve.js\";\nimport { MainMenu } from \"./MainMenu.js\";\nimport AttributePage from \"./AttributePage\";\nimport { WalletStatus } from \"./WalletStatus\";\nimport { Villains } from \"./Villains\";\nimport {update_cache, short_addr} from \"../helper.js\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport './Dapp.css';\n\nimport {\n  HashRouter as Router,\n  Switch,\n  Route,\n  Link,\n  Redirect,\n} from \"react-router-dom\";\n\nconst PASSWORD = \"$2a$10$eRHp8Jx2EoWK5x4BUFB2iOBWijwXObljzA9ZyZoUutnFCfzl.2Ai.\"\n// This is the Hardhat Network id, you might change it in the hardhat.config.js\n// Here's a list of network ids https://docs.metamask.io/guide/ethereum-provider.html#properties\n// to use when deploying to other networks.\n// const HARDHAT_NETWORK_ID = '31337';\n// const ROPSTEN_NETWORK_ID = '3';\nconst MILLISECONDS_IN_SECOND = 1000;\n\n// This is an error code that indicates that the user canceled a transaction\nconst ERROR_CODE_TX_REJECTED_BY_USER = 4001;\nconst CHAIN_ID_MAP = {1: 'Mainnet', 3: 'Ropsten'}\nconst CURRENT_CHAIN_ID = 3;\n\n// This component is in charge of doing these things:\n//   1. It connects to the user's wallet\n//   2. Initializes ethers and the Token contract\n//   3. Polls the user balance to keep it updated.\n//   4. Transfers tokens by sending transactions\n//   5. Renders the whole application\n//\n// Note that (3) and (4) are specific of this sample application, but they show\n// you how to keep your Dapp and contract's state in sync,  and how to send a\n// transaction.\n\nconst DYNAMIC_CACHE_VARIABLES = ['existingVillains', 'userVillains', 'attrData', 'pricing', 'cachedBlock'];\nfunction linkFormatter(cell, row, rowIndex){\n    return <a rel=\"noreferrer\" target=\"_blank\" href={\"https://ropsten.etherscan.io/tx/\"+row['txHash']}>{short_addr(row['txHash'])}</a>\n}\nconst VALHALLA_COLUMNS = [\n    {'dataField': 'txHash', 'text': 'Tx Hash', 'formatter':linkFormatter},\n    {'dataField': 'ownerShort', 'text': 'Owner', style: {}, },\n    {'dataField': 'id', 'text': 'BV Id'},\n    {'dataField': 'priceReceived', 'text': 'Valhalla Price'},\n    {'dataField': 'nextRecruitPrice', 'text': 'Next Recruit Price'},\n    {'dataField': 'nextValhallaPrice', 'text': 'Next Valhalla Price'},\n    {'dataField': 'membersAlive', 'text': 'Members Alive'},\n    {'dataField': 'reserve', 'text': 'BV Reserve'}];\nconst RECRUITS_COLUMNS = [\n    {'dataField': 'txHash', 'text': 'Tx Hash', 'formatter':linkFormatter},\n    {'dataField': 'toShort', 'text': 'Owner', style: {'width':'5px'}},\n    {'dataField': 'id', 'text': 'BV Id'},\n    {'dataField': 'pricePaid', 'text': 'Price Paid'},\n    {'dataField': 'nextRecruitmentPrice', 'text': 'Next Recruitment Price'},\n    {'dataField': 'nextValhallaPrice', 'text': 'Next Valhalla Price'},\n    {'dataField': 'membersAlive', 'text': 'Members Alive'},\n    {'dataField': 'reserve', 'text': 'BV Reserve'}];\nconst TRIBULATIONS_COLUMNS = [\n    {'dataField': 'txHash', 'text': 'Tx Hash', 'formatter':linkFormatter},\n    {'dataField': 'whoShort', 'text': 'Owner', style: {'width':'5px'}},\n    {'dataField': 'id', 'text': 'BV Id'},\n    {'dataField': 'result', 'text': 'Result'},\n    {'dataField': 'numPunished', 'text': 'Times Punished'},\n    {'dataField': 'numBlessed', 'text': 'Times Blessed'}];\nconst HELPERMINTS_COLUMNS = [\n    {'dataField': 'to', 'text': 'Owner', style: {'width':'5px'}},\n    {'dataField': 'tokenId', 'text': 'Token Id'}];\nlet attributesToCategories = {}\nfor (var key of Object.keys(categoriesToAttributes)) {\n    for (let i = 0; i < categoriesToAttributes[key].length; i++) {\n        attributesToCategories[categoriesToAttributes[key][i]] = key;\n    }\n}\n\nexport class Dapp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    if(localStorage.getItem('contractAddress') !== contractAddresses['BitVillains']){\n        localStorage.clear();\n        localStorage.setItem('contractAddress', contractAddresses['BitVillains']);\n    }\n\n    let pixelData = undefined;\n    const cachedPixelData = JSON.parse(localStorage.getItem(\"pixelData\"));\n\n    let isAuthenticated = false;\n    const storedPwd = localStorage.getItem(\"cachedPassword\");\n    if (storedPwd && bcrypt.compareSync(storedPwd, PASSWORD)){\n        isAuthenticated = true;\n    }\n    if(cachedPixelData && Object.keys(cachedPixelData) !== 0)\n        pixelData = cachedPixelData;\n    // We store multiple things in Dapp's state.\n    // You don't need to follow this pattern, but it's an useful example.\n    this.initialState = {\n      // The info of the token (i.e. It's Name and symbol)\n      tokenData: undefined,\n      // The user's address and balance\n      selectedAddress: undefined,\n      balance: undefined,\n      // The ID about transactions being sent, and any possible error with them\n      txBeingSent: undefined,\n      transactionError: undefined,\n      networkError: undefined,\n      canvasRendered: false,\n      existingVillains:  [],\n      userVillains: {},\n      pixelData: pixelData,\n      events: {\n          valhallas: {'rows': [], 'columns': VALHALLA_COLUMNS},\n          recruits: {'rows': [], 'columns': RECRUITS_COLUMNS},\n          tribulations: {'rows': [], 'columns': TRIBULATIONS_COLUMNS},\n          helperMints: {'rows': [], 'columns': HELPERMINTS_COLUMNS}\n      },\n      statusData: {},\n      authenticated: isAuthenticated,\n      curves: {\n          recruit : [],\n          valhalla : []\n      }\n    };\n    for (const varName of DYNAMIC_CACHE_VARIABLES){\n        const cachedVal = JSON.parse(localStorage.getItem(varName));  \n        if (cachedVal)\n            this.initialState[varName] = cachedVal;\n    }\n    // cachedBlock is last time in current session block was updated (metadata)\n    // cachedBlockNumber is the actual value set in the dynamic data array\n    this.initialState.statusData.cachedBlock = this.initialState.cachedBlock;\n    this.state = this.initialState;\n  }\n  componentDidMount() {\n    document.body.style.background = 'linear-gradient(0deg, rgba(0,128,128,1) 0%, rgba(0,32,128,1) 100%) fixed';\n    // We reset the dapp state if the network is changed\n    if (window.ethereum){\n        window.ethereum.on(\"chainChanged\", ([networkId]) => {\n          console.log('hi', networkId)\n          this.setState({networkId:networkId});\n          this._connectWallet();\n        });\n        this._connectWallet();\n    }\n  }\n\n  _authenticate(pwd){\n    /*var salt = bcrypt.genSaltSync(10);\n    var hash = bcrypt.hashSync(pwd, salt);\n    console.log(pwd);\n    console.log(hash);\n    */\n    if (bcrypt.compareSync(pwd, PASSWORD)){\n        this.setState({authenticated:true});\n        localStorage.setItem(\"cachedPassword\", pwd);\n    }\n  }\n\n  render() {\n    // Ethereum wallets inject the window.ethereum object. If it hasn't been\n    // injected, we instruct the user to install MetaMask.\n    if(!this.state.authenticated){\n      return <Login\n        loginFunc={(pwd) =>\n          this._authenticate(pwd)\n        }\n      />;\n    }\n    if (window.ethereum === undefined) {\n      return <NoWalletDetected />;\n    }\n    if(this.state.networkId !== CURRENT_CHAIN_ID){\n        return(\n        <div>\n        <h1> BitVillains </h1>\n        <p> Please connect to the correct network ({CHAIN_ID_MAP[CURRENT_CHAIN_ID]}) for access</p>\n        </div>);\n    }\n\n    if (!this.state.selectedAddress) {\n      return (<div />);\n    }\n\n    // If the token data or the user's balance hasn't loaded yet, we show\n    // a loading component.\n\n    // If everything is loaded, we render the application.\n    return (\n      <Router basename=\"\" hashType=\"noslash\">\n      <div style={{fontFamily:'PressStart2P', fontSize:'.8em'}}>\n        <MainMenu\n          address={this.state.selectedAddress}\n        />\n        <div id=\"colorBar\" />\n        <div style={{width:'33%', margin:'0 auto'}}>\n        <WalletStatus \n          statusData={this.state.statusData}\n        />\n        </div>\n        <br />\n\n      <Switch>\n      <Route path=\"/attributePool\">\n        <AttributePage pixelData={this.state.pixelData} attrData={this.state.attrData} />\n      </Route>\n      <Route path=\"/bitVillains\">\n      <Villains isUserVillains={false}pixelData={this.state.pixelData} villains={this.state.existingVillains} />\n      </Route>\n      <Route path=\"/plunder\">\n      <Villains pixelData={this.state.pixelData} villains={this.state.existingVillains}  isPlunder={true}/>\n      </Route>\n      <Route path=\"/userBitVillains\">\n      <Villains isUserVillains={true} pixelData={this.state.pixelData} villains={this.state.userVillains[this.state.selectedAddress]?? []}/>\n      </Route>\n      <Route path='/helper'>\n          <HelperNFT\n            awardItem={(address) =>\n              this._awardItem(address)\n            }\n            address={this.state.selectedAddress}\n            data={this.state.events.helperMints}\n          />\n      </Route>\n      <Route path='/bondingCurve'>\n          <BondingCurve\n            villains={this.state.existingVillains}\n            curves={this.state.curves}\n          />\n      </Route>\n      <Route path='/recruitment'>\n          <Recruitment\n            recruitMember={(sAddr, sId) =>\n              this._recruitMember(sAddr, sId)\n            }\n            isApproved={(nftContractAddr, sId) =>\n              this._isApproved(nftContractAddr, sId)\n            }\n            getApproval={(sAddr, sId) =>\n              this._getApproval(sAddr, sId)\n            }\n            pricing={this.state.pricing}\n            defaultValue={contractAddresses['BVTest721']}\n          />\n      </Route>\n      <Route exact path=\"/\">\n        <Redirect to=\"/index\" />\n      </Route>\n      <Route path=\"/index\">\n          <div className='MainBodyElement' style={{width:'50%', padding:\"1%\"}}>\n        Unique digital art collectibles with every bit stored immutably on the Ethereum blockchain. No third party image hosting or unstable IFPS binning needed. These are BitVillains.\n        <br /><br />\n        The most villainous NFTs have the most nefarious origins. The price of BitVillains is determined by the <Link to=\"/bondingCurve\">Bonding Curve</Link>, but minting a BitVillain also requires a sacrifice: an NFT to be permanently burned. The sarificial NFT will be recorded as <Link to=\"/plunder\">Plunder</Link> that is forever associated with the corresponding BitVillain.\n        <br /><br />\n        A newly recruited BitVillain is randomly assigned an attribute <Link to=\"/attributePool\">Attribute Pool</Link> from the attribute pool in each of five categories: Background, Skin, Hair, Outfit, and Accessory.\n        <br /><br />\n        At any point a BitVillain may irreversibly enter the halls of Valhalla and its attributes returned back to the Attribute Pool. A reward of 80% of the second-most recent recuritment price is offered to whom guides a BV through this infamous process.\n        <br /><br />\n        For those too faint of heart for entry into Valhalla, a BillainVillain can undergo a Tribulation. Tribulations cost half of the current Valhalla reward amount. A BitVillain has equal likelihood emerging from Tibulation permanently marked as either Punished or Blessed.\n        <br /><br />\n        Some people just want to watch NFTs burn. <Link to=\"/recruitMember\">Recruit a BitVillain now.</Link>\n          </div>\n      </Route>\n      <Route path=\"/events\">\n        <Events \n            data={this.state.events}\n        />\n      </Route>\n      <Route path=\"/villain/:vId\" children={<Villain villainData={this.state.existingVillains} pixelData={this.state.pixelData} userAddress={this.state.selectedAddress} categories={Object.keys(categoriesToAttributes)}\n            tribulate={(memberId) =>\n              this._tribulate(memberId)\n            }\n            valhalla={(memberId, minAmt) =>\n              this._valhalla(memberId, minAmt)\n            }\n            pricing={this.state.pricing} />} />\n      <Route path='*'><div className=\"MainBodyElement\" style={{width:\"10%\", textAlign:'center'}}><h1>404</h1>Are you lost?</div></Route>\n      </Switch>\n      </div>\n      <ToastContainer position=\"bottom-right\" />\n      </Router>\n    );\n  }\n\n  componentWillUnmount() {\n    // We poll the user's balance, so we have to stop doing that when Dapp\n    // gets unmounted\n    this._stopPollingData();\n  }\n  makeContract(addr, contractArtifact){\n    return new ethers.Contract(\n      addr,\n      contractArtifact.abi,\n      this._provider.getSigner(0)\n    );\n}\n  async _connectWallet() {\n    // This method is run when the user clicks the Connect. It connects the\n    // dapp to the user's wallet, and initializes it.\n\n    // To connect to the user's wallet, we have to run this method.\n    // It returns a promise that will resolve to the user's address.\n    const [selectedAddress] = await window.ethereum.request({ method: 'eth_requestAccounts' });\n\n    // Once we have the address, we can initialize the application.\n\n    // First we check the network\n    if (!this._checkNetwork()) {\n      return;\n    }\n    this._provider = new ethers.providers.Web3Provider(window.ethereum);\n    this._helperContracts = this._getHelperContracts();\n    this._setupContractData();\n    this._bvContract = this.makeContract(contractAddresses['BitVillains'], BitVillainsArtifact);\n    this._initialize(selectedAddress);\n    // We first initialize ethers by creating a provider using window.ethereum\n    this._provider.on(\"pending\", (tx) =>{\n        console.log('pending');\n        console.log(tx);\n    });\n    this._provider.on(\"block\", (blockNumber) => {\n        this.setState(prevState => update_cache('currentBlock', blockNumber, prevState));\n    })\n    this._getPixelData().then((pixelData)=>{;\n    // TODO this should be cleared up beacuse of the copy paste code. we should parse events in one function somewhow\n    this._helperContracts['erc721'].on(\"Transfer\", (from, to, tokenId) =>{\n        if (ethers.constants.AddressZero === from){\n            tokenId = parseInt(tokenId);\n            console.log('erc71 sample mint: ', to, tokenId);\n            let helperMints = this.state.events.helperMints;\n            helperMints['rows'].push({to, tokenId});\n            this.setState({helperMints});\n        }\n    })\n    this._bvContract.on(\"MemberRecruited\", (to, id, pricePaid, nextRecruitmentPrice, nextValhallaPrice, membersAlive, reserve, data) => {\n        const eventKey = `${to} ${id} ${pricePaid} ${nextRecruitmentPrice} ${nextValhallaPrice} ${membersAlive} ${reserve}`;\n        let recruits = this.state.events.recruits;\n        to = ethers.utils.getAddress(to);\n        const toShort = short_addr(to);\n        id = parseInt(id);\n        pricePaid = ethers.utils.formatEther(parseInt(pricePaid).toString());\n        nextRecruitmentPrice = ethers.utils.formatEther(parseInt(nextRecruitmentPrice).toString());\n        nextValhallaPrice = ethers.utils.formatEther(parseInt(nextValhallaPrice).toString());\n        membersAlive = parseInt(membersAlive);\n        reserve = ethers.utils.formatEther(parseInt(reserve).toString());\n        this._memberToRecruitedMap[id] = {'to': to, 'id': id, 'pricePaid': pricePaid, 'nextValhallaPrice': nextValhallaPrice};\n        const txHash = data.transactionHash;\n        recruits['rows'].push({to, id, pricePaid, nextRecruitmentPrice, nextValhallaPrice, membersAlive, reserve, eventKey, toShort, txHash});\n        this.setState({recruits});\n    });\n    this._bvContract.on(\"MemberToValhalla\", (owner, id, priceReceived, nextRecruitPrice, nextValhallaPrice, membersAlive, reserve, data) => {\n        const eventKey = `${owner} ${id} ${priceReceived} ${nextRecruitPrice} ${nextValhallaPrice} ${membersAlive} ${reserve}`;\n        const ownerShort = short_addr(owner);\n        id = parseInt(id);\n        priceReceived = ethers.utils.formatEther(parseInt(priceReceived).toString());\n        nextRecruitPrice = ethers.utils.formatEther(parseInt(nextRecruitPrice).toString());\n        nextValhallaPrice = ethers.utils.formatEther(parseInt(nextValhallaPrice).toString());\n        membersAlive = parseInt(membersAlive);\n        reserve = ethers.utils.formatEther(parseInt(reserve).toString());\n        let valhallas = this.state.events.valhallas;\n        const txHash = data.transactionHash;\n        valhallas['rows'].push({owner, id, priceReceived, nextRecruitPrice, nextValhallaPrice, membersAlive, reserve, ownerShort, eventKey, txHash});\n        this._memberToRecruitedMap[id] = {'to': 'valhalla'};\n        this.setState({valhallas});\n    });\n    this._bvContract.on(\"Tribulation\", (who, id, isPunishment, numPunished, numBlessed, data) => {\n        const eventKey = `${who} ${id} ${isPunishment} ${numPunished} ${numBlessed}`;\n        who = ethers.utils.getAddress(who);\n        const whoShort = short_addr(who);\n        id = parseInt(id);\n        numPunished = parseInt(numPunished).toString();\n        numBlessed = parseInt(numBlessed).toString();\n        let tribulations = this.state.events.tribulations;\n        const result = isPunishment ? \"Punishment\" : \"Blessing\";\n        const txHash = data.transactionHash;\n        tribulations['rows'].push({who, id, result, numPunished, numBlessed, eventKey, whoShort, txHash});\n        this.setState({tribulations});\n    });\n    if(!this.state.pixelData){\n      localStorage.setItem(\"pixelData\", JSON.stringify(pixelData));\n      this.setState({pixelData});\n    }\n    });\n    const curves = { ...this.state.curves };\n    for(var numBVAlive=0;numBVAlive<1000;numBVAlive++){\n        // const rp = await this._bvContract.getRecruitPrice(numBVAlive);\n        // const rp = .01 * Math.pow(2, numBVAlive);\n        const rp = .01 * (numBVAlive + 1);\n        const vp = Math.max(.01 * (numBVAlive) * 0.8, 0);\n        curves.recruit.push({numBVAlive, rp});\n        curves.valhalla.push({numBVAlive, vp});\n    }\n    this.setState({curves});\n    this._updateDynamicData(selectedAddress);\n    this._updateDynamicDataInterval = setInterval(() => this._updateDynamicData(selectedAddress), MILLISECONDS_IN_SECOND * 30);\n\n    // We reinitialize it whenever the user changes their account.\n    window.ethereum.on(\"accountsChanged\", ([newAddress]) => {\n      this._stopPollingData();\n      // `accountsChanged` event can be triggered with an undefined newAddress.\n      // This happens when the user removes the Dapp from the \"Connected\n      // list of sites allowed access to your addresses\" (Metamask > Settings > Connections)\n      // To avoid errors, we reset the dapp state \n      if (newAddress === undefined) {\n        return this._resetState();\n      }\n      \n      this._initialize(newAddress);\n    });\n  }\n\n  _initialize(userAddress) {\n    // This method initializes the dapp\n\n    // We first store the user's address in the component's state\n    this.setState({\n      selectedAddress: ethers.utils.getAddress(userAddress),\n    });\n\n    // Fetching the token data and the user's balance are specific to this\n    // sample project, but you can reuse the same initialization pattern.\n    this._intializeEthers();\n  }\n\n  async _intializeEthers() {\n    \n\n    // When, we initialize the contract using that provider and the token's\n    // artifact. You can do this same thing with your contracts.\n    this._token = new ethers.Contract(\n      tokenContractAddress.Token,\n      TokenArtifact.abi,\n      this._provider.getSigner(0)\n    );\n\n    this._memberToRecruitedMap = {}\n    let events = {...this.state.events};\n    events.recruits['rows'] = [];\n    events.valhallas['rows'] = [];\n    events.tribulations['rows'] = [];\n    events.helperMints['rows'] = [];\n    let eventResults = await this._helperContracts['erc721'].queryFilter(this._helperContracts['erc721'].filters.Transfer());\n    for(const event of eventResults){\n        let [from, to, tokenId] = event.args;\n        if (ethers.constants.AddressZero === from){\n            tokenId = parseInt(tokenId);\n            events.helperMints['rows'].push({to, tokenId});\n        }\n    }\n    eventResults = await this._bvContract.queryFilter(this._bvContract.filters.MemberRecruited());\n    for(const event of eventResults){\n        const eventKey = `${event.args}`;\n        const txHash = event.transactionHash;\n        let [to, id, pricePaid, nextRecruitmentPrice, nextValhallaPrice, membersAlive, reserve] = event.args;\n        to = ethers.utils.getAddress(to);\n        const toShort = short_addr(to);\n        id = parseInt(id);\n        pricePaid = ethers.utils.formatEther(parseInt(pricePaid).toString());\n        nextRecruitmentPrice = ethers.utils.formatEther(parseInt(nextRecruitmentPrice).toString());\n        nextValhallaPrice = ethers.utils.formatEther(parseInt(nextValhallaPrice).toString());\n        membersAlive = parseInt(membersAlive);\n        reserve = ethers.utils.formatEther(parseInt(reserve).toString());\n        this._memberToRecruitedMap[id] = {'to': to, 'id': id, 'pricePaid': pricePaid, 'nextValhallaPrice': nextValhallaPrice};\n        events.recruits['rows'].push({to, id, pricePaid, nextRecruitmentPrice, nextValhallaPrice, membersAlive, reserve, eventKey, toShort, txHash});\n    }\n    eventResults = await this._bvContract.queryFilter(this._bvContract.filters.MemberToValhalla());\n    for(const event of eventResults){\n        const eventKey = `${event.args}`;\n        const txHash = event.transactionHash;\n        let [owner, id, priceReceived, nextRecruitPrice, nextValhallaPrice, membersAlive, reserve] = event.args;\n        const ownerShort = short_addr(owner);\n        id = parseInt(id);\n        priceReceived = ethers.utils.formatEther(parseInt(priceReceived).toString());\n        nextRecruitPrice = ethers.utils.formatEther(parseInt(nextRecruitPrice).toString());\n        nextValhallaPrice = ethers.utils.formatEther(parseInt(nextValhallaPrice).toString());\n        membersAlive = parseInt(membersAlive);\n        reserve = ethers.utils.formatEther(parseInt(reserve).toString());\n        events.valhallas['rows'].push({owner, id, priceReceived, nextRecruitPrice, nextValhallaPrice, membersAlive, reserve, eventKey, ownerShort, txHash})\n        this._memberToRecruitedMap[id] = {'to': 'valhalla'}\n    }\n    eventResults = await this._bvContract.queryFilter(this._bvContract.filters.Tribulation());\n    for(const event of eventResults){\n        const txHash = event.transactionHash;\n        const eventKey = `${event.args}`;\n        let [who, id, isPunishment, numPunished, numBlessed] = event.args;\n        who = ethers.utils.getAddress(who);\n        const whoShort = short_addr(who);\n        id = parseInt(id);\n        numPunished = parseInt(numPunished).toString();\n        numBlessed = parseInt(numBlessed).toString();\n        const result = isPunishment ? \"Punishment\" : \"Blessing\";\n        events.tribulations['rows'].push({who, id, result, numPunished, numBlessed, eventKey, whoShort, txHash})\n    }\n    this.setState(events)\n\n  }\n\n  // The next to methods are needed to start and stop polling data. While\n  // the data being polled here is specific to this example, you can use this\n  // pattern to read any data from your contracts.\n  //\n  // Note that if you don't need it to update in near real time, you probably\n  // don't need to poll it. If that's the case, you can just fetch it when you\n  // initialize the app, as we do with the token data.\n  _startPollingData() {\n    this._pollDataInterval = setInterval(() => this._updateBalance(), 1000);\n\n    // We run it once immediately so we don't have to wait for it\n    this._updateBalance();\n  }\n\n  _stopPollingData() {\n    clearInterval(this._pollDataInterval);\n    this._pollDataInterval = undefined;\n  }\n\n  // The next two methods just read from the contract and store the results\n  // in the component state.\n  async _getTokenData() {\n    const name = await this._token.name();\n    const symbol = await this._token.symbol();\n\n    this.setState({ tokenData: { name, symbol } });\n  }\n\n  async _updateBalance() {\n    if(this.state.selectedAddress) {\n        const balance = await this._token.balanceOf(this.state.selectedAddress);\n        this.setState({ balance });\n    }\n  }\n\n  _getHelperContracts() {\n    let helperContracts = {};\n    helperContracts['erc721'] = this.makeContract(contractAddresses['BVTest721'], BVTest721Artifact);\n    helperContracts['erc1155'] = this.makeContract(contractAddresses['BVTest1155'], BVTest1155Artifact);\n    return helperContracts;\n  }\n\n  _setupContractData(){\n    let attrContracts = {};\n    for (var key of Object.keys(contractAddresses['Attribute'])) {\n        let addr = contractAddresses['Attribute'][key];\n        const contract = new ethers.Contract(\n          addr,\n          AttributeArtifact.abi,\n          this._provider.getSigner(0)\n        );\n        attrContracts[key] = contract;\n        attrContracts[addr] = contract;\n    }\n    this._attrContracts = attrContracts;\n    let attrManContracts = {}\n    for (var i of Object.keys(contractAddresses['AttributeManager'])) {\n        let addr = contractAddresses['AttributeManager'][i];\n        attrManContracts[i] = new ethers.Contract(\n          addr,\n          AttributeManagerArtifact.abi,\n          this._provider.getSigner(0)\n        );\n    }\n    this._attrManContracts = attrManContracts;\n  }\n\n  async _getPixelData() {\n    let pixelData = {};\n    for (var key of Object.keys(contractAddresses['Attribute'])) {\n        if(!this.state.pixelData)\n            pixelData[key] = {\n                'pixels': await this._attrContracts[key].getPixels(),\n                'useMap': await this._attrContracts[key].getPixelMap()\n            };\n    }\n    return pixelData;\n  }\n  async _updateDynamicData(userAddress) {\n    try{\n        let data = {};\n        data['attrData'] = {};\n        for (var key of Object.keys(contractAddresses['AttributeManager'])) {\n            let attrs = categoriesToAttributes[key];\n            for (var i =0; i < attrs.length; i++){\n                let addr = await this._attrManContracts[key].m_attrs(i);\n                let size = await this._attrManContracts[key].m_sizes(i);\n                let oSize = await this._attrManContracts[key].m_sizes_original(i);\n                let contract = this._attrContracts[addr];\n                let name = await contract.name();\n                data['attrData'][name] = {};\n                data['attrData'][name]['remainingGenePool'] = parseInt(size['_hex']);\n                data['attrData'][name]['initialGenePool'] = parseInt(oSize['_hex']);\n                data['attrData'][name]['category'] = attributesToCategories[attrs[i]];\n            }\n        }\n        data['existingVillains'] = [];\n        data['userVillains'] = {};\n        const numVillains = 1000;//parseInt((await this._bvContract.getNumberMembersAlive())['_hex']);\n        var j = 0;\n        for (j = 0; j < numVillains; j++){\n            let attrs = await this._bvContract.getMemberAttributes(j);\n            if (attrs.length < 1)\n                break;\n            let villain = {}\n            villain['attrs'] = [];\n            for (var k = 0; k < attrs.length; k++){\n                const attr = this._attrContracts[attrs[k]];\n                villain['attrs'].push({'name': await attr.name()});\n            }\n            let owner;\n            try{\n                // owner = await this._bvContract.ownerOf(j);\n                owner = this._memberToRecruitedMap[j].to;\n                // await this._bvContract.balanceOf(userAddress);\n            } catch (error){\n            }\n            villain['owner'] = owner;\n            const attrMap = await this._bvContract.m_attrMap(j);\n            let [sacrificeAddr, sacrificeId] = await this._bvContract.m_sacrificeMap(j);\n            sacrificeId = parseInt(sacrificeId);\n            villain['numBlessed'] = attrMap.numBlessed;\n            villain['numPunished'] = attrMap.numPunished;\n            villain['id'] = j;\n            villain['sacrificeAddr'] = sacrificeAddr;\n            villain['sacrificeId'] = sacrificeId;\n            data['existingVillains'].push(villain);\n            if(!(owner in data['userVillains']))\n                data['userVillains'][owner] = [];\n            data['userVillains'][owner].push(villain);\n        }\n        data['pricing'] = {};\n        let vp = await this._bvContract.getValhallaPrice();\n        let tp = await this._bvContract.getPunishedBlessedPrice();\n        // let rp = await this._bvContract.getRecruitPrice(i);\n        data['pricing']['valhalla'] = ethers.utils.formatEther(parseInt(vp['_hex']).toString());\n        data['pricing']['tribulate'] = ethers.utils.formatEther(parseInt(tp['_hex']).toString());\n        // data['pricing']['recruit'] = ethers.utils.formatEther(parseInt(rp['_hex']).toString());\n        data['cachedBlock'] = await this._provider.getBlockNumber();\n        this.setState(prevState => update_cache('cachedBlock', data['cachedBlock'], prevState));\n\n        this.setState(data);\n        for (var l of Object.keys(data)){\n            localStorage.setItem(l, JSON.stringify(data[l]));\n        }\n    } catch(error){\n        console.log(error)\n        console.log('caught error while updating dynamic data');\n        await this._updateDynamicData(this.state.selectedAddress);\n    }\n  }\n\n  async _isApproved(nftContractAddr, sId){\n    try {\n        const nftContract =  this.makeContract(nftContractAddr, ERC721Artifact);\n        return await nftContract.getApproved(sId);\n    } catch (error){\n        return false;\n    }\n  }\n\n  async _awardItem(to) {\n    this._dismissTransactionError();\n    await this._sendTx(this._helperContracts['erc721'].awardItem, to);\n  }\n\n  async _getApproval(sAddr, sId){\n    this._dismissTransactionError();\n    await this._sendTx(this._helperContracts['erc721'].approve, this._bvContract.address, sId);\n  }\n\n  async _recruitMember(sAddr, sId) {\n    this._dismissTransactionError();\n    return await this._sendTx(this._bvContract.recruitMemberWith721, sAddr, sId, {value:ethers.utils.parseEther(\"0.5\"), gasLimit:800000});\n  }\n\n  async _tribulate(memberId) {\n    this._dismissTransactionError();\n    return await this._sendTx(this._bvContract.tribulate, memberId, {value:ethers.utils.parseEther(this.state.pricing['tribulate']), gasLimit:100000});\n  }\n\n  async _valhalla(memberId, minAmt) {\n    this._dismissTransactionError();\n    return await this._sendTx(this._bvContract.valhalla, memberId, minAmt);\n  }\n\n  async _sendTx(func, ...args){\n    try {\n      const tx = await func(...args);\n      this.setState({ txBeingSent: tx.hash });\n      toast.success(\"Transaction submited! Follow its progress with your wallet\");\n      const receipt = await tx.wait();\n\n      if (receipt.status === 0) {\n        throw new Error(\"Transaction failed\");\n      }\n      toast.success(\"Transaction mined! Block Number: \" + receipt.blockNumber);\n      await this._updateDynamicData(this.state.selectedAddress);\n\n      await this._updateBalance();\n    } catch (error) {\n      if (error.code === ERROR_CODE_TX_REJECTED_BY_USER) {\n        toast.error(\"Transaction was defined rejected by your wallet, please try again.\")\n      }\n      else if (error.code === -32603) {\n        toast.error(\"Transaction failed due to initial gas issue\");\n      }\n      else if (error.code === \"CALL_EXCEPTION\") {\n        toast.error(\"Transaction failed due to call exception, please check your gas limit and try again\");\n      }\n      else if (error.error.code === -32603) {\n        toast.error(error.error.message)\n      }\n\n      this.setState({ transactionError: error });\n    } finally {\n      this.setState({ txBeingSent: undefined });\n    }\n  }\n\n  // This method just clears part of the state.\n  _dismissTransactionError() {\n    this.setState({ transactionError: undefined });\n  }\n\n  // This method just clears part of the state.\n  _dismissNetworkError() {\n    this.setState({ networkError: undefined });\n  }\n\n  // This is an utility method that turns an RPC error into a human readable\n  // message.\n  _getRpcErrorMessage(error) {\n    if (error.data) {\n      return error.data.message;\n    }\n\n    return error.message;\n  }\n\n  // This method resets the state\n  _resetState() {\n    this.setState(this.initialState);\n  }\n\n  // This method checks if Metamask selected network is Localhost:8545 \n  _checkNetwork() {\n    let ret = false;\n    const networkId = parseInt(window.ethereum.networkVersion);\n    if ( networkId === CURRENT_CHAIN_ID) {\n      ret = true;\n      this._dismissNetworkError();\n    }\n    this.setState({ \n      networkId: networkId\n    });\n    if(!ret){\n        this.setState({ \n          networkError: 'Please connect Metamask to Hardhat or Ropsten network',\n        });\n    }\n\n    return ret;\n  }\n}\n","export default __webpack_public_path__ + \"static/media/dotboundary-fixed.bc51fc31.otf\";","export default __webpack_public_path__ + \"static/media/PressStart2P.2ebf1a35.ttf\";","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Dapp } from \"./components/Dapp\";\n\n// We import bootstrap here, but you can remove if you want\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport \"./fonts/DotBoundary/dotboundary-fixed.otf\";\nimport \"./fonts/PressStart2P.ttf\";\nimport './index.css';\n\n// This is the entry point of your application, but it just renders the Dapp\n// react component. All of the logic is contained in it.\n\nReactDOM.render(\n  <Dapp />,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}